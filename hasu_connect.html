<!DOCTYPE html>
<html lang="ja">
<head prefix="og: http://ogp.me/ns# fb: http://ogp.me/ns/fb# website: http://ogp.me/ns/website#">
<meta charset="utf-8">

<meta property="og:url" content="https://ratius.github.io/LLS/lll_connect.html">
<meta property="og:title" content="リンクラ スクールアイドルコネクトまとめ">
<meta property="og:type" content="website">
<meta property="og:description" content="「Link! Like! ラブライブ!」">

<meta name="twitter:card" content="summary">
<meta name="twitter:site" content="@ratius55">
<meta name="twitter:creator" content="@ratius55">
<meta name="twitter:title" content="リンクラ スクールアイドルコネクトまとめ">
<meta name="twitter:description" content="「虹ヶ咲学園スクールアイドル　マンスリーアンケート」データの非公式保管所です。">
<meta name="description" content="「虹ヶ咲学園スクールアイドル　マンスリーアンケート」データの非公式保管所です。">

<meta name="viewport" content="width=device-width,initial-scale=1">

<title>リンクラ スクールアイドルコネクトまとめ | ラブライブ！ストレージ</title>
<link rel="icon" type="image/vnd.microsoft.icon" href="img/favicon.ico">
<link rel="stylesheet" href="main.css">
<style><!--
/* 絞り込み */
#PullDown-Container {
	font-size: x-large;
	font-weight: bold;
	margin-bottom: 10px;
}

#PullDownList {
	max-width: 100%;
	border: solid 2px #b9a;
	font-size: x-large;
	font-weight: bold;
	padding: 5px;
	margin-right: 10px;
}

/* 動画一覧 */
#OutputArea {
	width: 100%;
	max-width: 1000px;
	height: calc(100vh - 150px);
	overflow-x: hidden;
	overflow-y: scroll;
	background-color: white;
	border: solid 3px #e2067e;
}

article {
	width: 100%;
	display: grid;
	flex-wrap: wrap;
}

article.cancelled {
	background-color: #ddd;
}
div.cancelled {
	background-color: #ccc;
}

article:not(.cancelled) .article-box-title {
	background-color: #fde;
}

.article-box-date, .article-box-title, .article-box-desc, .article-box-tags {
	padding: 4px 10px;
}
.article-box-date, .article-box-tube{
	display: flex;
	align-items: center;
}
.article-box-date{ /*日付入力欄*/
	font-size: 95%;
	font-weight: bold;
	background-color: #eee;
	color: #666;
}
.article-box-title { /*タイトル*/
	font-weight: bold;
	border-bottom: solid 1px #bbb;
}
.article-box-desc { /*説明文*/
	font-size: small;
	border-bottom: solid 1px #bbb;
}

.setlist { /*セットリスト*/
	width: min(300px, 100%);
	border: solid 1px #9ce;
}
.setlist-summary {
	margin: 0;
	padding: 2px 6px;
	background-color: #d0f0ff;
}
.setlist-ol {
	margin: 5px 0;
	padding-left: 30px;
}
.setlist-mc {
	color: #69c;
}

/* ■スマートフォン向けレイアウト */
@media screen and (max-width: 599px) {
	.pc-only {
		display: none;
	}

	article {
		grid-template-columns: auto 70px;
	}
	article:not(:last-child) {
		border-bottom: solid 3px #999;
	}
	.article-box-tube:not(.cancelled) {
		background-color: #fde;
	}
	
	.article-box-date:before {
		content: "▼";
	}
	.article-box-date {
		width: 100%;
		border-bottom: solid 1px #c0b0b8;
	}
	.article-box-tube {
		border-bottom: solid 1px #bbb;
	}
	.article-box-date, .article-box-desc, .article-box-tags{
		grid-column: span 2;
	}
	.pc-exclusive-link {
		text-decoration: none;
		color: inherit;
		cursor: default;
		pointer-events: none;
	}
}

/* ■PC向けレイアウト */
@media screen and (min-width: 600px) {
	.sp-only {
		display: none;
	}

	article {
		grid-template-columns: 120px auto 130px;
		border-right: solid 1px #999;
		border-bottom: solid 1px #999;
	}

	.article-box-date {
		justify-content: center;
		width: 120px;
		grid-row: span 3;
		border-right: solid 1px #999;
	}
	.article-box-tube {
		justify-content: center;
		width: 130px;
		grid-row: span 3;
		border-left: solid 1px #bbb;
	}
	.article-box-tube a {
		width: 124px;
		height: 72px;
		border: solid 2px #f66;
	}
	.article-box-tube img {
		width: 120px;
		height: 68px;
		object-fit: cover;
	}
}

--></style>
<script><!--
//■デバッグモード
const isDebugMode = (location.search.substring(1).split('&').indexOf('debug') >= 0);

//■キャラクターのデータ
const TagData = {
	"meets"     : {"name": "With×MEETS" , "r":160, "g":112, "b": 96, "style": "Square" },
	"live"      : {"name": "Fes×LIVE"   , "r": 80, "g":128, "b":128, "style": "Square" },
	"cancelled" : {"name": "配信中止"    , "r":128, "g":128, "b":128, "style": "Square" },
	
	"Kaho"    : {"name": "花帆"   , "r":248, "g":181, "b":  0, "style": "Round" },
	"Sayaka"  : {"name": "さやか" , "r": 83, "g":131, "b":195, "style": "Round" },
	"Kozue"   : {"name": "梢"     , "r":104, "g":190, "b":141, "style": "Round" },
	"Tsuzuri" : {"name": "綴理"   , "r":186, "g": 38, "b": 54, "style": "Round" },
	"Rurino"  : {"name": "瑠璃乃" , "r":231, "g": 96, "b":158, "style": "Round" },
	"Megumi"  : {"name": "慈"     , "r":200, "g":194, "b":198, "style": "Round" }
};

//■キャラクター名のボタン ver.20231222a
function DrawCharName(character){
	if(character in TagData){ //存在する場合のみ
		const target = TagData[character];
		return `<span class="button-${target.style} button_${character}">${target.name}</span>`;
	} else {
		console.log(`キャラクターID ${character} は存在しません`);
		return "Error";
	}
}

//■Date型 → "YYYY/MM/DD" への変換
const formatDate = (date => {
	const year = date.getFullYear();
	const month = String(date.getMonth() + 1).padStart(2, '0');
	const day = String(date.getDate()).padStart(2, '0');
	return `${year}/${month}/${day}`;
});

//■「スクールアイドルコネクト一覧」の描画
function DrawLiveList(season){
	const TimeOutputStart = performance.now();
	
	if(season === undefined || season === ""){ return false;} //期間が指定されていない場合、描画をキャンセル
	const DateTemp = season.split(',');
	const DateStart = new Date(DateTemp[0]);
	const DateEnd = new Date(DateTemp[1]);

	const result = LiveList.filter( (connect) => { //当該動画を
		if(!'title' in connect || connect.title === ''){ return false;} //タイトル未指定ならスキップ
		if(connect.date.getTime() > DateStart.getTime()
		&& connect.date.getTime() < DateEnd.getTime()){ //日付の範囲指定
			return true;
		}
	});

	//特定の記法をリンクへと置換する
	const DecorateText = ( text => text
		// {{X:タイトル:数字17桁}} → Xへのリンク
		.replace(/\{\{[xX]:([^:]*):(\d{19})\}\}/g,
		'<span class="pc-only">（<a href="https://twitter.com/hasunosora_SIC/status/$2" target="blank">$1<\/a>）<\/span>')
		// {{L:タイトル:URL}} → リンク
		.replace(/\{\{[lL]:([^:]*):([^}]*)\}\}/g,
		'<a href="$2" class="pc-exclusive-link" target="_blank" rel="noopener noreferrer">$1<\/a>')
	);
	
	document.getElementById("OutputArea").innerHTML = result.map( connect => {
		const isCancelled = (connect.tags.find( (e) => e === 'cancelled') ? 'cancelled' : '');
		const videoContent =
		('tube' in connect && connect.tube ?
			`<a href="https://www.youtube.com/watch?v=${connect.tube}" target="_blank">
				<img src="http://img.youtube.com/vi/${connect.tube.split('&')[0]}/default.jpg" alt="${connect.title}" loading="lazy" class="pc-only">
				<span class="sp-only">動画へ</span>
			</a>`
		:'');
		const descContent = DecorateText(connect.desc)
		+ ('setlist' in connect ? 
			`<details class="setlist">
				<summary class="setlist-summary">セットリスト (クリックで展開)</summary>
				<ol class="setlist-ol">
					${connect.setlist.map(program =>
					`<li>${(program === 'MC' ? `<i class="setlist-mc">MC</i>` : program)}</li>`).join('')}
				</ol>
			</details>`
		:'');
		
		return `
		<article class="${isCancelled}">
			<div class="article-box-date">${formatDate(connect.date)}</div>
			<div class="article-box-title ${isCancelled}">${connect.title}</div>
			<div class="article-box-tube ${isCancelled}">${videoContent}</div>
			<div class="article-box-desc">${descContent}</div>
			<div class="article-box-tags">${connect.tags.map( tag => DrawCharName(tag)).join('')}</div>
		</article>`
	}).join('');
	
	if(isDebugMode) {
		const TimeOutputEnd = performance.now();
		console.log(`${season}出力完了。\n所要時間: ${TimeOutputEnd - TimeOutputStart}ミリ秒`);
	}
}
--></script>
</head>
<body class="RM">
<header>
	<h2 id="MainTitle">リンクラ スクールアイドルコネクトまとめ</h2>
</header>

<section id="Foreword">
	<h3 class="foreword">まえがき</h3>
	<p>アプリ「Link! Like! ラブライブ！」内のコンテンツ「スクールアイドルコネクト」で配信された動画のまとめです。</p>
</section>


<div id="RightMenu">
	<ul>
		<li><strong>目次</strong></li>
		<li><hr></li>
		<li><a href="#Foreword">まえがき</a></li>
		<li><a href="#CastedLiveList">動画一覧</a></li>
		<li><a href="#History">更新履歴</a></li>
	</ul>
</div>

<div id="Loading">
	<h4>Now Loading...</h4>
	このコンテンツはJavaScriptを使用しています。<br>
	いつまで待ってもこの表示が消えない場合、JavaScriptがオフになっている可能性があります。<br>
	お手数ですが、JavaScriptの実行を許可した上でページを再読み込みしてください。<br>
</div>

<section id="CastedLiveList">
	<h3 class="muse">動画一覧</h3>
	<p>下部のプルダウンメニューから期間を選択すると、その期間に配信された動画の情報が表示されます。
	</p>
	<p>「動画リンク」列のサムネイル、または「動画へ」と書かれたリンクをクリック/タップすると、YouTubeの動画を開きます。<br>
	タグのキャラクター欄は、実際に配信に参加したメンバーを表しています。</p>
	<div id="PullDown-Container">
		<label for="PullDownList">絞り込み</label>
		<select id="PullDownList" onChange="DrawLiveList(this.value)">
			<option value="">(期間を選択)</option>
			<option value="2023-04-01,2023-09-30">103期 上半期（2023年4月 - 2023年9月）</option>
			<option value="2023-10-01,2024-03-31">103期 下半期（2023年10月 - 2024年3月）</option>
			<!--<option value="2024-04-01,2024-09-30">104期 上半期（2024年4月 - 2024年9月）</option>
			<option value="2024-10-01,2025-03-31">104期 下半期（2024年10月 - 2025年3月）</option>
			<option value="2025-04-01,2025-09-30">105期 上半期（2025年4月 - 2025年9月）</option>
			<option value="2025-10-01,2026-03-31">105期 下半期（2025年10月 - 2026年3月）</option>-->
		</select>
	</div>
	<div id="OutputArea">
		<div style="padding: 10px; vertical-align: top; font-size: large; color: #666">
			<div style="font-size: 120%; color:#666;">(上のプルダウンメニューから、期間を選んでください)</div>
		</div>
	</div>
</section>

<section id="History">
<h3 class="niji">更新履歴（動画掲載以外）</h3>
<p>下のボックス内の、色つきの日付の行をクリックすると詳しい情報が表示されます。</p>
<div id="history2">
	<details open>
		<summary><span class="date">2023/12/22</span> - スマートフォン向けレイアウトを導入</summary>
		<div>
			<span class="new"></span>スマートフォン向けレイアウトを導入
		</div>
	</details>
	<details>
		<summary><span class="date">2023/11/18</span> - データ追加・改修</summary>
		<div>
			<span class="new"></span>中止となった配信の情報に背景色を付与<br>
			<span class="fix"></span>「配信一覧」を期間を選択して表示するように変更<br>
			<span class="fix"></span>スマートフォン等のデバイスからの見え方を調整
		</div>
	</details>
	<details>
		<summary class="important"><span class="date">2023/08/23</span> - 公開</summary>
		<div>
			<span class="new"></span>公開
		</div>
	</details>
</div>
</section>

<nav>
<p><a id="BackToMain" href="index.html">トップページに戻る。</a></p>
</nav>

<script><!--
function loadScript(src, callback) {
    let done = false;
    let head = document.getElementsByTagName('head')[0];
    let script = document.createElement('script');
    script.src = src;
    head.appendChild(script);
    // Attach handlers for all browsers
    script.onload = script.onreadystatechange = function() {
        if ( !done && (!this.readyState ||
                this.readyState === "loaded" || this.readyState === "complete") ) {
            done = true;
            callback();
            // Handle memory leak in IE
            script.onload = script.onreadystatechange = null;
            if ( head && script.parentNode ) {
                head.removeChild( script );
            }
        }
    };
}

loadScript("data/hasu_live.js", function() {
	const TimeOutputStart = performance.now();

	//◆ボタン色計算用
	const getColor = (Object, divisor) => {
		if(!divisor){ divisor = 1;}
		const r = Math.floor((Object.r + (255 * (divisor-1))) / divisor);
		const g = Math.floor((Object.g + (255 * (divisor-1))) / divisor);
		const b = Math.floor((Object.b + (255 * (divisor-1))) / divisor);
		return 'rgb(' + r + ',' + g + ',' + b + ');';
	}
	//■色データをCSSに追加
	let AddedCSS = '\n';
	Object.keys(TagData).forEach(function(key) {
		AddedCSS += '.button_' + key + '{\n\t'
		+ 'background-color: ' + getColor(TagData[key], 3) + '\n\t'
		+ 'border-color: ' + getColor(TagData[key], 1) + '\n}\n';
	});
	document.querySelector('style').textContent += AddedCSS; //一括追加で再計算の時間を一度だけに

	//◆「Now Loading...」解除
	document.getElementById("Loading").style.display = "none";
	
	//■デバックモード時の処理
	if(isDebugMode) {
		//◆デバッグモードであることを表示
		document.title = '[debug]' + document.title;
		document.bgColor = '#dce';
		
		document.getElementById("MainTitle").innerHTML += "*";
		document.getElementById("BackToMain").href += "?debug";
		
		//◆描画時間の出力
		const TimeOutputEnd = performance.now();
		console.log('リンクラ スクールアイドルコネクトまとめ\n初期描画処理: ' + (TimeOutputEnd - TimeOutputStart) + ' ミリ秒');
	}
});
--></script>

</body>
</html>